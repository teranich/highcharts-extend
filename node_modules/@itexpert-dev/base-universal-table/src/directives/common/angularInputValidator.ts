import {isUndefined} from '@itexpert-dev/tiny-helpers'
import {ICheckRequireAttributesQueryParams} from "./ICheckRequireAttributesQueryParams";

class AngularInputValidator{
    /**
     * @desc method for validate angular Input params, return error if has own errors, if all ok return null
     * @returns {null | Error}
     */
    public static checkRequireAttributes(query: ICheckRequireAttributesQueryParams): Error{
        let errors: Array<string> = [];
        for (let attribute of query.requireAttributes){
            if(isUndefined(query.directiveContext[attribute])){
                errors.push(
                    `\nmissing require attribute ${attribute}\ncurrent value is: ${(query as any)[attribute]}`
                )
            }
        }
        if(errors.length > 0){
            if(!isUndefined(query.rightExample)){
                errors.push(`\nright example: ${query.rightExample}`)
            }
            return new Error(errors.join());
        }
        return  null
    }
}

export {AngularInputValidator, ICheckRequireAttributesQueryParams}